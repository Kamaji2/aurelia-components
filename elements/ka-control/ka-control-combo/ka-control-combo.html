<template>
  <div class="display-value ${schema.readonly ? 'readonly' : ''}" click.delegate="open($event)">
    <ul>
      <li repeat.for="item of valuestack">${item.text|kaControlComboTextify}<i class="fa-light fa-close" if.bind="schema.datamultiple === true && !schema.readonly" click.delegate="select(item)"></i></li>
    </ul>
  </div>
  <div ref="drawer" class="ka-control-combo-drawer ${schema.datamultiple === true ? 'multiple' : ''}">
    <input type="text" if.bind="schema.datapreload !== true || preloadedCombostack.length > 8" class="search" placeholder="Cerca" ref="searchInput" value.bind="term" keyup.delegate="search()" keydown.delegate="searchKeyDown($event)" />
    <ul>
      <li repeat.for="item of _combostack" click.delegate="select(item)" class="${item.selected?'selected':''} ${item.model.optgroup?'optgroup':''}" innerhtml.bind="item.text | kaControlComboHighlight:term"></li>
    </ul>
  </div>
</template>
